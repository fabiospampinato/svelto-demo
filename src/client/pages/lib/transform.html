
<!-- TRANSFORM -->

<template name="transform">

  {{{widget.divider "Sample"}}}

  {{{sample.square}}}

  {{{> transform_actions}}}

</template>

<!-- ACTIONS -->

<template name="transform_actions">

  {{{widget.divider "API"}}}

  <div class="multiple actions joined">
    <input name="matrix" class="bordered" placeholder="Values...">
    {{{widget.action "matrix" "matrix ()"}}}
  </div>

  <div class="multiple actions joined">
    <input name="transformation" class="bordered" placeholder="Value...">
    {{{widget.action "scaleX" "transformation ( 'scaleX' )"}}}
    {{{widget.action "skewY" "transformation ( 'skewY' )"}}}
    {{{widget.action "skewX" "transformation ( 'skewX' )"}}}
    {{{widget.action "scaleY" "transformation ( 'scaleY' )"}}}
    {{{widget.action "translateX" "transformation ( 'translateX' )"}}}
    {{{widget.action "translateY" "transformation ( 'translateY' )"}}}
  </div>

  <div class="multiple actions joined">
    <input name="scale_x" class="bordered" placeholder="X...">
    <input name="scale_y" class="bordered" placeholder="Y...">
    {{{widget.action "scale" "transform2d ( 'scale' )"}}}
  </div>

  <div class="multiple actions joined">
    <input name="skew_x" class="bordered" placeholder="X...">
    <input name="skew_y" class="bordered" placeholder="Y...">
    {{{widget.action "skew" "transform2d ( 'skew' )"}}}
  </div>

  <div class="multiple actions joined">
    <input name="translate_x" class="bordered" placeholder="X...">
    <input name="translate_y" class="bordered" placeholder="Y...">
    {{{widget.action "translate" "transform2d ( 'translate' )"}}}
  </div>


  <script>
    var $sample = $('.square-sample');

    function getValue ( name ) {
      return $('[name="' + name + '"]').val ();
    }

    function matrix () {
      var val = getValue ( 'matrix' );
      if ( val ) {
        $sample.matrix ( val.split ( ',' ) );
      } else {
        $.toast ( $sample.matrix () );
      }
    }

    function transformation ( type ) {
      var val = getValue ( 'transformation' );
      if ( val ) {
        $sample[type] ( val );
      } else {
        $.toast ( $sample[type]() );
      }
    }

    function transform2d ( name ) {
      var x = getValue ( name + '_x' ),
          y = getValue ( name + '_y' );
      if ( !_.isEmpty ( x ) && !_.isEmpty ( y ) ) {
        $sample[name] ( x, y );
      } else {
        $.toast ( $sample[name]() );
      }
    }
  </script>

</template>
