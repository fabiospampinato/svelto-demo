
<!-- COLOR -->

<template name="color">

  {{{widget.divider "HEX"}}}

  <div class="multiple joined">
    <div class="label compact bordered pointing-right hex"></div>
    <input name="hex_r" placeholder="Red..." class="bordered">
    <input name="hex_g" placeholder="Green..." class="bordered">
    <input name="hex_b" placeholder="Blue..." class="bordered">
    <div class="label compact bordered">
      <i class="icon">arrow_forward</i>
    </div>
    {{{widget.action "RGB" "hex2rgb ()"}}}
    {{{widget.action "HSV" "hex2hsv ()"}}}
    {{{widget.action "HSL" "hex2hsl ()"}}}
  </div>

  {{{widget.divider "RGB"}}}

  <div class="multiple joined">
    <div class="label compact bordered pointing-right rgb"></div>
    <input name="rgb_r" placeholder="Red..." class="bordered">
    <input name="rgb_g" placeholder="Green..." class="bordered">
    <input name="rgb_b" placeholder="Blue..." class="bordered">
    <div class="label compact bordered">
      <i class="icon">arrow_forward</i>
    </div>
    {{{widget.action "HEX" "rgb2hex ()"}}}
    {{{widget.action "HSV" "rgb2hsv ()"}}}
    {{{widget.action "HSL" "rgb2hsl ()"}}}
  </div>

  {{{widget.divider "HSV"}}}

  <div class="multiple joined">
    <div class="label compact bordered pointing-right hsv">
      <i class="icon">block</i>
    </div>
    <input name="hsv_h" placeholder="Hue..." class="bordered">
    <input name="hsv_s" placeholder="Saturation..." class="bordered">
    <input name="hsv_v" placeholder="Value..." class="bordered">
    <div class="label compact bordered">
      <i class="icon">arrow_forward</i>
    </div>
    {{{widget.action "HEX" "hsv2hex ()"}}}
    {{{widget.action "RGB" "hsv2rgb ()"}}}
    {{{widget.action "HSL" "hsv2hsl ()"}}}
  </div>

  {{{widget.divider "HSL"}}}

  <div class="multiple joined">
    <div class="label compact bordered pointing-right hsl"></div>
    <input name="hsl_h" placeholder="Hue..." class="bordered">
    <input name="hsl_s" placeholder="Saturation..." class="bordered">
    <input name="hsl_l" placeholder="Lightness..." class="bordered">
    <div class="label compact bordered">
      <i class="icon">arrow_forward</i>
    </div>
    {{{widget.action "HEX" "hsl2hex ()"}}}
    {{{widget.action "RGB" "hsl2rgb ()"}}}
    {{{widget.action "HSV" "hsl2hsv ()"}}}
  </div>

  <script>
    function getValue ( name ) {
      return $('[name="' + name + '"]').val ();
    }

    function setValue ( name, value ) {
      return $('[name="' + name + '"]').val ( value );
    }

    function getHex () {
      return {
        r: getValue ( 'hex_r' ),
        g: getValue ( 'hex_g' ),
        b: getValue ( 'hex_b' )
      };
    }

    function setHex ( hex ) {
      setValue ( 'hex_r', hex.r );
      setValue ( 'hex_g', hex.g );
      setValue ( 'hex_b', hex.b );
      updateHex ( hex );
    }

    function updateHex ( hex ) {
      $('.hex').css ( 'background-color', '#' + hex.r + hex.g + hex.b );
    }

    $('input[name="hex_r"], input[name="hex_g"], input[name="hex_b"]').on ( 'change', function () {
      updateHex ( getHex () );
    });

    function getRgb () {
      return {
        r: getValue ( 'rgb_r' ),
        g: getValue ( 'rgb_g' ),
        b: getValue ( 'rgb_b' )
      };
    }

    function setRgb ( rgb ) {
      setValue ( 'rgb_r', rgb.r );
      setValue ( 'rgb_g', rgb.g );
      setValue ( 'rgb_b', rgb.b );
      updateRgb ( rgb );
    }

    function updateRgb ( rgb ) {
      $('.rgb').css ( 'background-color', 'rgb(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ')' );
    }

    $('input[name="rgb_r"], input[name="rgb_g"], input[name="rgb_b"]').on ( 'change', function () {
      updateRgb ( getRgb () );
    });

    function getHsv () {
      return {
        h: getValue ( 'hsv_h' ),
        s: getValue ( 'hsv_s' ),
        v: getValue ( 'hsv_v' )
      };
    }

    function setHsv ( hsv ) {
      setValue ( 'hsv_h', hsv.h );
      setValue ( 'hsv_s', hsv.s );
      setValue ( 'hsv_v', hsv.v );
    }

    function getHsl () {
      return {
        h: getValue ( 'hsl_h' ),
        s: getValue ( 'hsl_s' ),
        l: getValue ( 'hsl_l' )
      };
    }

    function setHsl ( hsl ) {
      setValue ( 'hsl_h', hsl.h );
      setValue ( 'hsl_s', hsl.s );
      setValue ( 'hsl_l', hsl.l );
      updateHsl ( hsl );
    }

    function updateHsl ( hsl ) {
      $('.hsl').css ( 'background-color', 'hsl(' + hsl.h + ',' + hsl.s + '%,' + hsl.l + '%)' );
    }

    $('input[name="hsl_h"], input[name="hsl_s"], input[name="hsl_l"]').on ( 'change', function () {
      updateHsl ( getHsl () );
    });

    function hex2rgb () {
      setRgb ( Svelto.Color.hex2rgb ( getHex () ) );
    }

    function hex2hsv () {
      setHsv ( Svelto.Color.hex2hsv ( getHex () ) );
    }

    function hex2hsl () {
      setHsl ( Svelto.Color.hex2hsl ( getHex () ) );
    }

    function rgb2hex () {
      setHex ( Svelto.Color.rgb2hex ( getRgb () ) );
    }

    function rgb2hsv () {
      setHsv ( Svelto.Color.rgb2hsv ( getRgb () ) );
    }

    function rgb2hsl () {
      setHsl ( Svelto.Color.rgb2hsl ( getRgb () ) );
    }

    function hsv2hex () {
      setHex ( Svelto.Color.hsv2hex ( getHsv () ) );
    }

    function hsv2rgb () {
      setRgb ( Svelto.Color.hsv2rgb ( getHsv () ) );
    }

    function hsv2hsl () {
      setHsl ( Svelto.Color.hsv2hsl ( getHsv () ) );
    }

    function hsl2hex () {
      setHex ( Svelto.Color.hsl2hex ( getHsl () ) );
    }

    function hsl2rgb () {
      setRgb ( Svelto.Color.hsl2rgb ( getHsl () ) );
    }

    function hsl2hsv () {
      setHsv ( Svelto.Color.hsl2hsv ( getHsl () ) );
    }

    function init () {
      setHex ({ r: 'ff', g: '00', b: '00' });
      hex2rgb ();
      hex2hsv ();
      hex2hsl ();
    }
    init ();
  </script>

</template>
